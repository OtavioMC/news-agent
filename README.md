# News Agent

A full-stack JavaScript application that implements a Retrieval-Augmented Generation (RAG) system for querying and summarizing news articles. The system integrates Kafka for message processing, Pinecone for vector storage and retrieval, and Google Generative AI (Gemini) for content generation.

## Features

- **Article Processing**: Fetches and processes news articles from URLs, cleans the content, and stores embeddings in Pinecone.
- **Retrieval-Augmented Generation (RAG)**: Uses Pinecone to retrieve relevant articles based on a query and generates responses using Gemini.
- **Kafka Integration**: Consumes messages from a Kafka topic to process queries and perform RAG.
- **REST API**: Provides an endpoint to query the system directly.

## Configuration

The application requires the following environment variables to be set in a `.env` file:

### Kafka Configuration
- `KAFKA_BROKER`: The Kafka broker URL.
- `KAFKA_USERNAME`: The Kafka username for authentication.
- `KAFKA_PASSWORD`: The Kafka password for authentication.
- `KAFKA_TOPIC_NAME`: The Kafka topic to subscribe to.
- `KAFKA_GROUP_ID_PREFIX`: A prefix for the Kafka consumer group ID.

### Pinecone Configuration
- `PINECONE_API_KEY`: Your Pinecone API key.
- `PINECONE_INDEX_NAME`: The name of the Pinecone index to use for storing and querying embeddings.

### Google Generative AI (Gemini) Configuration
- `GEMINI_API_KEY`: Your Google Generative AI API key.

### Example `.env` File
```plaintext
# Kafka Configuration
KAFKA_BROKER="your-kafka-broker-url"
KAFKA_USERNAME="your-kafka-username"
KAFKA_PASSWORD="your-kafka-password"
KAFKA_TOPIC_NAME="your-kafka-topic"
KAFKA_GROUP_ID_PREFIX="your-group-id-prefix"

# Pinecone Configuration
PINECONE_API_KEY="your-pinecone-api-key"
PINECONE_INDEX_NAME="your-index-name"

# Google Generative AI Configuration
GEMINI_API_KEY="your-gemini-api-key"
```

## Implemented Components

### 1. **Kafka Consumer**
- Consumes messages from the specified Kafka topic.
- Processes queries to either fetch and process articles from URLs or perform RAG using Pinecone and Gemini.
- Logs generated responses and sources.

### 2. **Article Processor**
- Fetches HTML content from a URL.
- Extracts and cleans the main content using Cheerio.
- Generates embeddings using Gemini and stores them in Pinecone.

### 3. **Search Functionality**
- Queries Pinecone for relevant articles based on a user query.
- Retrieves metadata and content for the top matches.

### 4. **REST API**
- Provides a `/agent` endpoint to handle queries.
- Supports both URL-based article processing and general query-based RAG.

## How to Run

1. Install dependencies:
   ```bash
   npm install
   ```

2. Start the application:
   ```bash
   npm start
   ```


## API Endpoints

### POST `/agent`
Handles queries and returns a response generated by Gemini.

#### Request Body
```json
{
  "query": "Your query or URL here"
}
```

#### Response
```json
{
  "answer": "Generated response",
  "sources": [
    {
      "title": "Article title",
      "url": "Article URL",
      "date": "Publication date"
    }
  ]
}
```

## Future Enhancements
- Add support for more advanced query handling.
- Implement caching for frequently queried data.
- Enhance error handling and logging.

## License
This project is licensed under the MIT License. See the [LICENSE](./LICENSE) file for details.
